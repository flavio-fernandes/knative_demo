<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.9 (457564)"/><meta name="keywords" content="k8, todo"/><meta name="altitude" content="70.67876434326172"/><meta name="author" content="flaviof"/><meta name="created" content="2019-03-20 09:03:58 +0000"/><meta name="latitude" content="42.642578125"/><meta name="longitude" content="-71.43660260513026"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-03-31 20:41:58 +0000"/><title>knative talk preso workflow [main]</title></head><body><div>evernote uuid: 2019-Mar-20-Wed@05:04:11</div><div><br/></div><div>cd ~/Desktop</div><div>git clone<a href="https://github.com/flavio-fernandes/knative_demo"> git@github.com:flavio-fernandes/knative_demo.git</a>  knative_demo.git &amp;&amp; cd knative_demo.git</div><div>git clone <a href="https://github.com/flavio-fernandes/flaskapp">git@github.com:flavio-fernandes/flaskapp.git</a>  flaskapp.git</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cd ~/Desktop/knative_demo.git  ; #0</div><div><div><br/></div><div>time vagrant up  ;  # takes about  ~4 minutes<br/></div></div><div><div><br/></div><div>bat Vagrantfile<br/></div></div><div><div><br/></div><div># take snapshot of vm<br/></div></div><div>vagrant snapshot save freshAndClean</div><div><div>vagrant snapshot list<br/></div></div><div><br/></div><div># so we can easily go back to a fresh clean start  ;  #vsr</div><div>vagrant snapshot restore --no-provision freshAndClean</div></div><div><br/></div><div>Run app in vm</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cd ~/Desktop/knative_demo.git &amp;&amp; vagrant ssh  ; #8</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">ll</span></div><div><br/></div><div>cd /vagrant/flaskapp.git &amp;&amp; \</div><div>bat src/app.py Dockerfile  ; #zz0</div><div><br/></div><div>cd /vagrant/flaskapp.git/src &amp;&amp; \</div><div>TARGET=fromVagrantVM FLASK_DEBUG=1 FLASK_APP=app.py flask run --host 0.0.0.0 --port 8080  ;  #9</div><div><br/></div><div>open <a href="http://localhost:8080/json">http://localhost:8080/json</a></div></div><div><br/></div><div><br/></div><div>Run and build app in docker inside vm</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cd /vagrant/flaskapp.git &amp;&amp; \</div><div>docker build -t flaskapp .   ; #1<br/></div><div><br/></div><div>docker run -e "TARGET=bar" -d --rm -p 8081:5000 --name flaskapp flaskapp  ; #2</div><div>docker ps  ; #dps</div><div>docker logs --follow flaskapp  ; #3</div><div><br/></div><div>open <a href="http://localhost:8081">http://localhost:8081</a><br/></div><div><br/></div><div><div>cd ~/Desktop/knative_demo.git &amp;&amp; vagrant ssh  ; #8</div></div><div>curl http://localhost:8081/json?delay=2000  ; #zz1</div><div><br/></div><div># get inside running container</div><div>docker exec -it flaskapp /bin/sh  ; #4</div><div>netstat -plnt  ; #5</div><div>top</div><div>exit</div><div><br/></div><div>docker stop flaskapp  ; #6</div></div><div><br/></div><div><br/></div><div>Auth with Google Cloud</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cat &lt;&lt; EOT &gt;&gt; /home/vagrant/.bashrc_me</div><div><br/></div><div>export PROJECT=flaviof-knative</div><div>export CLUSTER_NAME=knative1</div><div>export CLUSTER_ZONE=us-east1-d</div><div>EOT</div><div>source /home/vagrant/.bashrc_me ; echo $PROJECT   ; #z1</div><div><br/></div><div>gcloud auth login  &amp;&amp; \</div><div>gcloud auth application-default login   ; #z2</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div># if need to create project:</div><div># gcloud init</div><div># gcloud projects create $PROJECT --set-as-default</div><div># enable billing</div><div># open <a href="https://console.cloud.google.com/">https://console.cloud.google.com/</a></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">echo $PROJECT ; </span>gcloud config set core/project $PROJECT &amp;&amp; \</div><div>gcloud config set compute/zone $CLUSTER_ZONE    ; #z3</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div># enable services</div><div>gcloud services enable cloudapis.googleapis.com &amp;&amp; \</div><div>gcloud services enable container.googleapis.com &amp;&amp; \</div><div>gcloud services enable containerregistry.googleapis.com &amp;&amp; \</div><div>echo ok    ; #z4</div><div><br/></div><div>gcloud auth configure-docker --project $PROJECT --quiet  ; #zzd</div><div><br/></div><div># no $CLUSTER_NAME yet</div><div>gcloud projects list &amp;&amp; gcloud container clusters list  ; #gpl</div></div><div><br/></div><div># Create cluster in GKE</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>CLUSTER_VERSION='latest' ; \</div><div>time gcloud container clusters create $CLUSTER_NAME \</div><div>--zone=$CLUSTER_ZONE \</div><div>--cluster-version=${CLUSTER_VERSION} \</div><div>--machine-type=n1-standard-4 \</div><div>--enable-autoscaling --min-nodes=1 --max-nodes=10 \</div><div>--enable-autorepair \</div><div>--scopes=service-control,service-management,compute-rw,storage-ro,cloud-platform,logging-write,monitoring-write,pubsub,datastore \</div><div>--num-nodes=3   ; #z5</div><div><br/></div><div># zzzz about 3 minutes... back to slides</div><div><br/></div><div><br/></div><div>gcloud projects list &amp;&amp; gcloud container clusters list  ; #gpl</div><div><br/></div><div># get the credentials</div><div>grep --quiet "gcloud container clusters get-credentials" /home/vagrant/.bashrc_me || \</div><div>cat &lt;&lt; EOT &gt;&gt; /home/vagrant/.bashrc_me</div><div><div><br/></div><div>gcloud container clusters get-credentials ${CLUSTER_NAME} --zone ${CLUSTER_ZONE} --project ${PROJECT}</div></div><div>EOT</div><div>gcloud container clusters get-credentials ${CLUSTER_NAME} --zone ${CLUSTER_ZONE} --project ${PROJECT}  ; #z6</div><div><div><br/></div><div># Set rbac.authorization</div></div><div>kubectl create clusterrolebinding cluster-admin-binding \</div><div>--clusterrole=cluster-admin \</div><div>--user=$(gcloud config get-value core/account)  ; #z7</div></div><div><br/></div><div>Install gloo (instead of istio)</div><div># Ref: <a href="https://www.knative.dev/docs/install/knative-with-gloo/">https://www.knative.dev/docs/install/knative-with-gloo/</a></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>glooctl --version &amp;&amp; time glooctl install knative &amp;&amp; echo ok  ; #z8</div><div><br/></div><div>kubectl get pods --namespace gloo-system ; \</div><div>kubectl get pods --namespace knative-serving ; #z9</div><div><br/></div><div># wait for external ip to be available from load balancer</div><div> kubectl get services --all-namespaces   ;  #kcs</div><div><br/></div><div>grep --quiet CLUSTERINGRESS_URL /home/vagrant/.bashrc_me || \</div><div>echo 'export CLUSTERINGRESS_URL=$(glooctl proxy url --name clusteringress-proxy)' &gt;&gt; /home/vagrant/.bashrc_me ;</div><div>[ -z "$CLUSTERINGRESS_URL" ] &amp;&amp; source /home/vagrant/.bashrc_me ; \</div><div>echo "CLUSTERINGRESS_URL: $CLUSTERINGRESS_URL" ; #za</div><div><br/></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># Map load balancer public ip to my dynamic DNS via postman</span></div></div><div><br/></div><div>Pushing foo app into google docker registry</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>open <a href="https://console.cloud.google.com/gcr/images/flaviof-knative?project=flaviof-knative">https://console.cloud.google.com/gcr/images/flaviof-knative?project=flaviof-knative</a></div><div><br/></div><div>cd /vagrant/flaskapp.git/ &amp;&amp; docker build -t foo .  ; #zb</div><div><br/></div><div># gcr.io/flaviof-knative/foo:latest</div><div>docker tag foo gcr.io/${PROJECT}/foo:latest &amp;&amp; \</div><div>docker push gcr.io/${PROJECT}/foo:latest  ; #zc</div></div><div><br/></div><div>Deploying it simple app on k8 (outside knative) -- SO BORING!!!  :^)</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cd /vagrant/k8s &amp;&amp; bat foo.yaml  ; #zd</div><div><br/></div><div># Start watching pods and service on default namespace</div><div>watch kubectl get pod,service  ; #kw</div><div><br/></div><div>kubens default &amp;&amp; \</div><div>kubectl create -f foo.yaml    ; #ze</div><div><br/></div><div>kubectl expose deployment foo-example --type LoadBalancer --port 80 --target-port 5000  ; #zf</div><div><div><br/></div></div><div># hit foo from inside cluster</div><div>kubectl run -i --tty --rm ubuntu --image=ubuntu:16.04 --restart=Never -- bash -il ; #kuu</div><div><br/></div><div>apt-get update &gt;/dev/null 2&gt;&amp;1 &amp;&amp; apt install --quiet -y curl &gt;/dev/null 2&gt;&amp;1 &amp;&amp; echo ok  ; #zh</div><div><br/></div><div>export CLUSTER_IP=${CLUSTER_IP:-X} ; export PORT=${PORT:-8080} ; #zi  [clipboard]</div><div><br/></div><div>curl http://${CLUSTER_IP}:${PORT}/json -H 'cache-control: no-cache'  ; #zj</div><div><br/></div><div># break it</div><div>curl http://${CLUSTER_IP}:${PORT}/json?boom -H 'cache-control: no-cache'  ; # zzk</div><div><br/></div><div>while : ; do curl http://${CLUSTER_IP}:${PORT}/json?delay=750 -H 'cache-control: no-cache' ; done ; #zk</div><div>#exit</div><div><br/></div><div># clean up</div><div>cd /vagrant/k8s &amp;&amp; { \</div><div>kubectl delete -f foo.yaml ; \<br/></div><div>kubectl delete service foo-example --ignore-not-found=true ; \</div><div>kubectl delete service foo-np --ignore-not-found=true; } ;  #zl<br/></div></div><div><br/></div><div>Deploying it simple, but using knative way</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cd /vagrant/k8s &amp;&amp; bat foo.yaml foo-knative-1.yaml ; #zm</div><div><br/></div><div>kubectl apply -f foo-knative-1.yaml    ; #zn</div><div><br/></div><div>printf "ksvc\n" ; kubectl get ksvc ; \</div><div>printf "\nroutes\n" ; kubectl get routes.serving.knative.dev ; \</div><div>printf "\nconfiguration\n" ; kubectl get configurations.serving.knative.dev  ; #zu</div><div><br/></div><div>curl -v -H "Host: foo-example-knative.default.example.com" ${CLUSTERINGRESS_URL}/json  ; #zp<br/></div><div><div>http ${CLUSTERINGRESS_URL}/json 'Host:foo-example-knative.default.example.com' -v -s fruity  ; #zq</div></div><div><br/></div><div># do it from postman</div><div>glooctl proxy url --name clusteringress-proxy ; \</div><div>dig +short foo.flaviof.dev ; # ki</div><div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># clean up... or not :^)</span></div></div><div>cd /vagrant/k8s &amp;&amp; \</div><div><div>kubectl delete -f foo-knative-1.yaml    ; #zr</div></div></div><div><br/></div><div>Blue green</div><div># ref: <a href="https://www.knative.dev/docs/serving/samples/blue-green-deployment/">https://www.knative.dev/docs/serving/samples/blue-green-deployment/</a></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>cd /vagrant/k8s &amp;&amp; bat blue-green-demo-1.yaml  ; #zs</div><div><br/></div><div>kubectl apply -f blue-green-demo-1.yaml  ; #zt</div><div><br/></div><div>printf "ksvc\n" ; kubectl get ksvc ; \</div><div>printf "\nroutes\n" ; kubectl get routes.serving.knative.dev ; \</div><div>printf "\nconfiguration\n" ; kubectl get configurations.serving.knative.dev  ; #zu</div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># open a window that grabs the color in a loop</span></div><div>while : ; do \</div><div>curl --silent -X GET http://foo.flaviof.dev/ \</div><div>  -H 'Host: blue-green-demo.default.example.com' \</div><div>  -H 'cache-control: no-cache' | grep 'div class=' ; \</div><div>sleep 1 ; \</div><div>done  ; #zv</div><div><br/></div><div># introduce green as v2</div><div>cd /vagrant/k8s &amp;&amp; <span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">diff </span>blue-green-demo-{1,2}.yaml | bat -l diff ; \</div><div>bat blue-green-demo-2.yaml ; #zw</div><div><br/></div><div>kubectl apply -f blue-green-demo-2.yaml  ; #zx</div><div><br/></div><div><br/></div><div># via postman, get green, even though the routes still point 100% blue,</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># by using v2 in the Host header</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># also show that v2 can be reached if asked explicitly</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># show revision 000002 via  #zu (above)</span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"># go 50/50</span></div><div>grep -B 2 -A 99 'kind: Route' blue-green-demo-2.yaml &gt; /tmp/blue-green-demo-2Route.yaml ; \</div><div>diff /tmp/blue-green-demo-2Route.yaml blue-green-demo-3.yaml | bat -l diff ; \</div><div>bat blue-green-demo-3.yaml  ; #K1</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div>kubectl apply -f blue-green-demo-3.yaml  ; #K2</div><div><br/></div><div># go 100 green</div><div><br/></div><div>diff blue-green-demo-{3,4}.yaml | bat -l diff ; \</div><div>bat blue-green-demo-4.yaml ;  #K3</div><div>kubectl apply -f blue-green-demo-4.yaml ;  #K4</div><div><br/></div><div><br/></div><div># cleanup blue and green kservice and route</div><div>cd /vagrant/k8s &amp;&amp; kubectl delete -f blue-green-demo-2.yaml  ;  # K5</div></div><div><br/></div><div>Auto build</div><div># ref: <a href="https://github.com/knative/build-templates/tree/master/kaniko">https://github.com/knative/build-templates/tree/master/kaniko</a></div><div>       <a href="https://www.knative.dev/docs/serving/samples/source-to-url-go/">https://www.knative.dev/docs/serving/samples/source-to-url-go/</a></div><div>       <a href="https://boxboat.com/2018/08/10/building-containers-with-kubernetes-and-knative/">https://boxboat.com/2018/08/10/building-containers-with-kubernetes-and-knative/</a></div><div>       <a href="https://content.pivotal.io/practitioners/knative-whittling-down-the-code">https://content.pivotal.io/practitioners/knative-whittling-down-the-code</a></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>Adding the Knative Build component</div><div># ref <a href="https://www.knative.dev/docs/build/installing-build-component/">https://www.knative.dev/docs/build/installing-build-component/</a></div><div>kubectl apply --filename https://github.com/knative/build/releases/download/v0.4.0/build.yaml  ;  #K6</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div>kubectl get pods --namespace knative-build --watch  ; #K7</div><div><br/></div><div># Install the kaniko build template</div><div>kubectl apply --filename https://raw.githubusercontent.com/knative/build-templates/master/kaniko/kaniko.yaml  ;  # K8</div><div><br/></div><div>kubectl get buildtemplates.build.knative.dev   ;  #K9</div><div><br/></div><div># Populate k8s/autodeploy/docker-secret.yaml if needed</div><div><br/></div><div>cd /vagrant/k8s/autodeploy &amp;&amp; \</div><div>kubectl apply -f docker-secret.yaml &amp;&amp; \</div><div>kubectl apply -f service-account.yaml  ;  #Ka</div><div><br/></div><div>bat docker-secret.yaml.example &amp;&amp; \</div><div>bat service-account.yaml &amp;&amp; \</div><div>bat build.yaml.standalone ;   #Kb</div><div><br/></div><div>#kubectl apply -f build.yaml</div><div>#kubectl get builds kaniko-build -oyaml</div><div>#kubectl delete build kaniko-build</div><div><br/></div><div>cd /vagrant/k8s &amp;&amp; \</div><div>diff -u foo-knative-{1,2}.yaml | bat -l diff &amp;&amp; \</div><div>bat foo-knative-2.yaml  ;  #Kc</div><div><br/></div><div>cd /vagrant/flaskapp.git &amp;&amp; \</div><div>git checkout knativeDemo &amp;&amp; \</div><div>emacs Dockerfile src/app.py  ;  #Kd</div><div><br/></div><div>git commit -a -m 'changed something' &amp;&amp; \</div><div>git push  ; #Ke</div><div><br/></div><div>cd /vagrant/k8s &amp;&amp; \</div><div>kubectl apply -f foo-knative-2.yaml  ; #Kf</div><div><br/></div><div>kubectl get builds foo-example-knative-00001 -oyaml | bat -l yaml  ; #Kg</div><div><br/></div><div>kubectl get ksvc  ; #Kh</div><div><br/></div><div>check image at: <a href="https://cloud.docker.com/u/flaviofdocker/repository/docker/flaviofdocker/foo">https://cloud.docker.com/u/flaviofdocker/repository/docker/flaviofdocker/foo</a></div><div><br/></div><div>http ${CLUSTERINGRESS_URL}/json 'Host:foo-example-knative.default.example.com' -v -s fruity  ; #zq</div><div><br/></div><div># Make a new Revision, using image in google cloud</div><div>kubectl apply -f foo-knative-1.yaml  ; #zn</div><div><br/></div><div># grab foo output via postman again or via</div><div>curl -v -H "Host: foo-example-knative.default.example.com" ${CLUSTERINGRESS_URL}/json  ; #zq</div><div><br/></div><div>kubectl get ksvc  ; #Kh</div><div><br/></div><div># jump back to image built as revision 000003</div><div>kubectl apply -f foo-knative-2.yaml  ; #Kf</div><div><br/></div><div>kubectl delete -f foo-knative-2.yaml  ; #Ki</div></div><div><br/></div><div><br/></div><div>cleanup</div><div>blow cluster away</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>time gcloud container clusters delete $CLUSTER_NAME --zone $CLUSTER_ZONE   ; #KZ</div><div># about 3.5 minutes</div></div><div><br/></div></body></html>